language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: aN42ylY6CFn07UAYDekRLj4psVthoJ3EvfXy4jF0D+G4r3Avl2kv93/26CxffjXzbufGjqM1Hi2v86u+jkl57lZVFRbzhVX35cOThizKMkClhjbAlDSFwwv0SP1B3uhNffFYPTr+0tzKt8YV66p3DtzHhrBU0W/luBVso2eHSzLURqhIVlOkqIgWy2Ozx23o5lJYgFTpyj4cgEGsX2LUPfkpjYWQuBVsdAQIPc3kxgeC+Hyqn9mIdKTgiTnUimoCQga5JBB3t/uOyTW6L50ajem+93Grk64BxaqB9+qTIay8QcEbVAP/Xa/yCy61Lk7vNta3pKN3INt+RAPTLwi3qay0ta4ZVaUKznKN0ZwNyXuidOHA4Y+L/90Du1WI6CtmgeEVo/OQGxEpOra67mOJrhabILtzQjah0wqWgI/EZ9s5Ni4W/+efnWnk1+gkPNb7ycs9RrVvWpHqxrKYZtZDWwe478umczfkrJpX8w2Bqi01PzKASggT7GewZL2qXzeA8yNc0H25OcrJoIZoSVvUCGcw/k/oT6ujuiIAE1SxotMOdZZScXWIt3t62ADfhiMKQRTeSoP7DaYNkOqUoLOl/FH7kcip8sHfqz/wCflKS2k04dO8zta12nhl6uNM47A8pESvoPJrXY2VkGh/nVO6lgeWEipoz/37OcWAGIHNbhE=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
